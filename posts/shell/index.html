<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="zh-cn" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Shell &middot; 哈喽沃德先生</title>
  <meta name="title" content="Shell &middot; 哈喽沃德先生" />
  
  <meta name="description" content="介绍 Blowfish 中所有可用的的配置变量。" />
  <meta name="keywords" content="Shell, 运维, " />
  
  
  <link rel="canonical" href="http://localhost:1313/posts/shell/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.8ea60310059bae0843ca33ef1de0ed63f1367330a68d9b13d82d6c3bc474a4c1a7c705dba2592e367518d4eb2c0a82076592aeab874ff2e02034ddc7147c752f.css"
    integrity="sha512-jqYDEAWbrghDyjPvHeDtY/E2czCmjZsT2C1sO8R0pMGnxwXbolkuNnUY1OssCoIHZZKuq4dP8uAgNN3HFHx1Lw==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.b3e22525a7c62c7b8e4c7c002546ab6498031635fa2d07802d593d476d7ab1262ec61b0cec0fe9f5653e1c9e6c256cbd0b66e5a8421b4f82a7bd2c1d5c901638.js"
    integrity="sha512-s&#43;IlJafGLHuOTHwAJUarZJgDFjX6LQeALVk9R216sSYuxhsM7A/p9WU&#43;HJ5sJWy9C2blqEIbT4KnvSwdXJAWOA==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/posts/shell/">
  <meta property="og:site_name" content="哈喽沃德先生">
  <meta property="og:title" content="Shell">
  <meta property="og:description" content="介绍 Blowfish 中所有可用的的配置变量。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-01T08:00:00+08:00">
    <meta property="article:modified_time" content="2024-07-01T08:00:00+08:00">
    <meta property="article:tag" content="Shell">
    <meta property="article:tag" content="运维">
    <meta property="og:image" content="http://localhost:1313/posts/shell/featured.png">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/posts/shell/featured.png">
  <meta name="twitter:title" content="Shell">
  <meta name="twitter:description" content="介绍 Blowfish 中所有可用的的配置变量。">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Shell",
    "headline": "Shell",
    "description": "介绍 Blowfish 中所有可用的的配置变量。",
    "abstract": "Shell 编程概述 # Shell 本身并不是内核的一部分，它只是站在内核的基础上编写的一个应用程序，它和 QQ、迅雷、Firefox 等其它软件没有什么区别。然而 Shell 也有着它的特殊性，就是开机立马启动，并呈现在用户面前；用户通过 Shell 来使用 Linux，不启动 Shell 的话，用户就没办法使用 Linux。",
    "inLanguage": "zh-cn",
    "url" : "http:\/\/localhost:1313\/posts\/shell\/",
    "author" : {
      "@type": "Person",
      "name": "哈喽沃德先生"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-07-01T08:00:00\u002b08:00",
    "datePublished": "2024-07-01T08:00:00\u002b08:00",
    
    "dateModified": "2024-07-01T08:00:00\u002b08:00",
    
    "keywords": ["Shell","运维"],
    
    "mainEntityOfPage": "true",
    "wordCount": "3518"
  }]
  </script>


  
  
  <meta name="author" content="哈喽沃德先生" />
  
  
  
  <link href="mailto:hello@your_domain.com" rel="me" />
  
  
  <link href="https://github.com/5mrhelloworld" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>





















  
  


  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">
	            <span style="font-weight:600;font-size:18px;">哈喽沃德先生</span>
	        </a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        文档
    </p>
</a>



            
            
  <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        标签
    </p>
</a>



            
            
  <a href="https://github.com/5mrhelloworld"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            文档
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            标签
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="https://github.com/5mrhelloworld"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >哈喽沃德先生</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/shell/"
      >Shell</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Shell
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-07-01 08:00:00 &#43;0800 CST">2024-07-01</time><span class="px-2 text-primary-500">&middot;</span><span>3518 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">17 分钟</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/shell/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Shell
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E8%BF%90%E7%BB%B4/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    运维
  </span>
</span>
  </span>
  
  
  
  
</div>



    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="哈喽沃德先生" src="/img/mrhelloworld_hu0c2d778d4678b66ff806bff295e6f853_90473_192x192_fill_q75_box_center.jpg" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      作者
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      哈喽沃德先生
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">mrhelloworld</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:hello@your_domain.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/5mrhelloworld"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open id="TOCView"
  class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#shell-编程概述">Shell 编程概述</a></li>
    <li><a href="#shell-名词解释">Shell 名词解释</a>
      <ul>
        <li><a href="#shell">Shell</a>
          <ul>
            <li><a href="#分类">分类</a></li>
            <li><a href="#she-bang">She Bang</a></li>
          </ul>
        </li>
        <li><a href="#脚本">脚本</a></li>
      </ul>
    </li>
    <li><a href="#第一个-shell-脚本">第一个 Shell 脚本</a></li>
    <li><a href="#shell-脚本执行">Shell 脚本执行</a>
      <ul>
        <li><a href="#使用路径">使用路径</a></li>
        <li><a href="#bash-或-sh">bash 或 sh</a></li>
        <li><a href="#source-或-">source 或 <code>.</code></a></li>
        <li><a href="#区别">区别</a></li>
      </ul>
    </li>
    <li><a href="#shell-基础">Shell 基础</a>
      <ul>
        <li><a href="#注释">注释</a>
          <ul>
            <li><a href="#单行注释">单行注释</a></li>
            <li><a href="#多行注释">多行注释</a></li>
          </ul>
        </li>
        <li><a href="#变量">变量</a>
          <ul>
            <li><a href="#语法">语法</a></li>
            <li><a href="#类型">类型</a></li>
          </ul>
        </li>
        <li><a href="#引号">引号</a></li>
        <li><a href="#位置参数">位置参数</a></li>
        <li><a href="#特殊变量">特殊变量</a></li>
        <li><a href="#字符串">字符串</a>
          <ul>
            <li><a href="#定义">定义</a></li>
            <li><a href="#长度">长度</a></li>
            <li><a href="#拼接">拼接</a></li>
            <li><a href="#截取">截取</a></li>
          </ul>
        </li>
        <li><a href="#数组">数组</a>
          <ul>
            <li><a href="#定义-1">定义</a></li>
            <li><a href="#获取">获取</a></li>
            <li><a href="#长度-1">长度</a></li>
            <li><a href="#拼接-1">拼接</a></li>
            <li><a href="#删除">删除</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#shell-高级">Shell 高级</a>
      <ul>
        <li><a href="#shell-运算符">Shell 运算符</a>
          <ul>
            <li><a href="#算数运算符">算数运算符</a></li>
            <li><a href="#关系运算符">关系运算符</a></li>
            <li><a href="#逻辑运算符">逻辑运算符</a></li>
            <li><a href="#字符串运算符">字符串运算符</a></li>
            <li><a href="#文件测试运算符">文件测试运算符</a></li>
          </ul>
        </li>
        <li><a href="#echo-打印数据">echo 打印数据</a></li>
        <li><a href="#test-命令">test 命令</a></li>
        <li><a href="#shell-流程控制">Shell 流程控制</a>
          <ul>
            <li><a href="#if">if</a></li>
            <li><a href="#case">case</a></li>
            <li><a href="#for">for</a></li>
            <li><a href="#while循环">while循环</a></li>
            <li><a href="#break">break</a></li>
            <li><a href="#continue">continue</a></li>
          </ul>
        </li>
        <li><a href="#shell-函数">Shell 函数</a></li>
      </ul>
    </li>
    <li><a href="#shell-实战">Shell 实战</a>
      <ul>
        <li><a href="#添加开机启动项">添加开机启动项</a></li>
        <li><a href="#虚拟机初始化脚本">虚拟机初始化脚本</a></li>
        <li><a href="#服务器相互免秘钥">服务器相互免秘钥</a>
          <ul>
            <li><a href="#生成密钥">生成密钥</a></li>
            <li><a href="#取消主机名与-host-校验">取消主机名与 host 校验</a></li>
            <li><a href="#拷贝公钥">拷贝公钥</a></li>
          </ul>
        </li>
        <li><a href="#集群启动脚本">集群启动脚本</a></li>
        <li><a href="#jps-脚本">JPS 脚本</a></li>
        <li><a href="#文件分发脚本">文件分发脚本</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#shell-编程概述">Shell 编程概述</a></li>
    <li><a href="#shell-名词解释">Shell 名词解释</a>
      <ul>
        <li><a href="#shell">Shell</a>
          <ul>
            <li><a href="#分类">分类</a></li>
            <li><a href="#she-bang">She Bang</a></li>
          </ul>
        </li>
        <li><a href="#脚本">脚本</a></li>
      </ul>
    </li>
    <li><a href="#第一个-shell-脚本">第一个 Shell 脚本</a></li>
    <li><a href="#shell-脚本执行">Shell 脚本执行</a>
      <ul>
        <li><a href="#使用路径">使用路径</a></li>
        <li><a href="#bash-或-sh">bash 或 sh</a></li>
        <li><a href="#source-或-">source 或 <code>.</code></a></li>
        <li><a href="#区别">区别</a></li>
      </ul>
    </li>
    <li><a href="#shell-基础">Shell 基础</a>
      <ul>
        <li><a href="#注释">注释</a>
          <ul>
            <li><a href="#单行注释">单行注释</a></li>
            <li><a href="#多行注释">多行注释</a></li>
          </ul>
        </li>
        <li><a href="#变量">变量</a>
          <ul>
            <li><a href="#语法">语法</a></li>
            <li><a href="#类型">类型</a></li>
          </ul>
        </li>
        <li><a href="#引号">引号</a></li>
        <li><a href="#位置参数">位置参数</a></li>
        <li><a href="#特殊变量">特殊变量</a></li>
        <li><a href="#字符串">字符串</a>
          <ul>
            <li><a href="#定义">定义</a></li>
            <li><a href="#长度">长度</a></li>
            <li><a href="#拼接">拼接</a></li>
            <li><a href="#截取">截取</a></li>
          </ul>
        </li>
        <li><a href="#数组">数组</a>
          <ul>
            <li><a href="#定义-1">定义</a></li>
            <li><a href="#获取">获取</a></li>
            <li><a href="#长度-1">长度</a></li>
            <li><a href="#拼接-1">拼接</a></li>
            <li><a href="#删除">删除</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#shell-高级">Shell 高级</a>
      <ul>
        <li><a href="#shell-运算符">Shell 运算符</a>
          <ul>
            <li><a href="#算数运算符">算数运算符</a></li>
            <li><a href="#关系运算符">关系运算符</a></li>
            <li><a href="#逻辑运算符">逻辑运算符</a></li>
            <li><a href="#字符串运算符">字符串运算符</a></li>
            <li><a href="#文件测试运算符">文件测试运算符</a></li>
          </ul>
        </li>
        <li><a href="#echo-打印数据">echo 打印数据</a></li>
        <li><a href="#test-命令">test 命令</a></li>
        <li><a href="#shell-流程控制">Shell 流程控制</a>
          <ul>
            <li><a href="#if">if</a></li>
            <li><a href="#case">case</a></li>
            <li><a href="#for">for</a></li>
            <li><a href="#while循环">while循环</a></li>
            <li><a href="#break">break</a></li>
            <li><a href="#continue">continue</a></li>
          </ul>
        </li>
        <li><a href="#shell-函数">Shell 函数</a></li>
      </ul>
    </li>
    <li><a href="#shell-实战">Shell 实战</a>
      <ul>
        <li><a href="#添加开机启动项">添加开机启动项</a></li>
        <li><a href="#虚拟机初始化脚本">虚拟机初始化脚本</a></li>
        <li><a href="#服务器相互免秘钥">服务器相互免秘钥</a>
          <ul>
            <li><a href="#生成密钥">生成密钥</a></li>
            <li><a href="#取消主机名与-host-校验">取消主机名与 host 校验</a></li>
            <li><a href="#拷贝公钥">拷贝公钥</a></li>
          </ul>
        </li>
        <li><a href="#集群启动脚本">集群启动脚本</a></li>
        <li><a href="#jps-脚本">JPS 脚本</a></li>
        <li><a href="#文件分发脚本">文件分发脚本</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

<script>

  var margin = 200;
  var marginError = 50;

  (function () {
    var $window = $(window);
    var $toc = $('#TOCView');
    var tocHeight = $toc.height();

    function onResize() {
      var windowAndMarginHeight = $window.height() - margin;
      if(tocHeight >= windowAndMarginHeight) {
        $toc.css("overflow-y", "scroll")
        $toc.css("max-height", (windowAndMarginHeight + marginError) + "px")
      } else {
        $toc.css("overflow-y", "hidden")
        $toc.css("max-height", "9999999px")
      }
    }

    $window.on('resize', onResize);
    $(document).ready(onResize);
  })();



</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <img src="index.assets/952608-20171217163520436-1204978127.png" style="zoom: 67%;" />


<h2 class="relative group">Shell 编程概述 
    <div id="shell-%E7%BC%96%E7%A8%8B%E6%A6%82%E8%BF%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E7%BC%96%E7%A8%8B%E6%A6%82%E8%BF%B0" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>　　Shell 本身并不是内核的一部分，它只是站在内核的基础上编写的一个应用程序，它和 QQ、迅雷、Firefox 等其它软件没有什么区别。然而 Shell 也有着它的特殊性，就是开机立马启动，并呈现在用户面前；用户通过 Shell 来使用 Linux，不启动 Shell 的话，用户就没办法使用 Linux。</p>
<p>　　在计算机科学中，Shell 俗称壳（用来区别于核），是指“为使用者提供操作界面”的软件（command interpreter，命令解析器）。它类似于 DOS 下的 COMMAND.COM 和后来的 cmd.exe。它接收用户命令，然后调用相应的应用程序。</p>
<p>　　Shell 并不是简单的堆砌命令，我们还可以在 Shell 中编程，这和使用 C++、Java、Python 等常见的编程语言并没有什么两样。</p>
<p>　　Shell 虽然没有 C++、Java、Python 等强大，但也支持了基本的编程元素，例如：</p>
<ul>
<li>变量、数组、字符串、注释、加减乘除、逻辑运算等概念；</li>
<li>if&hellip;else 选择结构，case&hellip;in 开关语句，for、while、until 循环；</li>
<li>函数，包括用户自定义的函数和内置函数（例如 printf、export、eval 等）。</li>
</ul>
<p>　　站在这个角度讲，Shell 也是一种编程语言，它的编译器（解释器）是 Shell 这个程序。我们平时所说的 Shell，有时候是指连接用户和内核的这个程序，有时候也指 Shell 编程。</p>


<h2 class="relative group">Shell 名词解释 
    <div id="shell-%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">Shell 
    <div id="shell" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 也是一个命令行解释器，是用户和内核之间的接口。用户可以在 Shell 中输入命令，然后，它解释命令来执行所需的任务。此外，它还可以执行程序和 Shell 脚本。Shell 脚本是一组命令，用户应该遵循标准语法向 Shell 写入命令。</p>
<p>　　总的来说，Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。Shell 既是一种命令语言，又是一种程序设计语言，如果要与内核打交道就必须学习 Shell 语言。</p>


<h4 class="relative group">分类 
    <div id="%E5%88%86%E7%B1%BB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%88%86%E7%B1%BB" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　Shell 是提供与内核沟通接口的命令解释器程序，但实际上 Shell 是这种解释器的统称，Linux 系统的 Shell 种类很多，包括 Bourne Shell（简称 sh）、Bourne Again Shell（简称 bash）、C Shell（简称 csh）、K shell（简称 ksh）、Shell for Root 等等。如下图：</p>
<img src="index.assets/v2-7db461ac451cef9ec95a40030aefaf73_720w.jpg" style="zoom: 67%;" />
<p>　　也就是说 sh 和 bash 都是 Linux 系统 Shell 的一种，其中 bash 命令是 sh 命令的超集，大多数 sh 脚本都可以在 bash 下运行。Linux 系统中预设默认使用的就是 bash。</p>
<p>　　要想知道操作系统支持哪种Shell类型，可在终端中输入以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># cat /etc/shells</span>
</span></span><span class="line"><span class="cl">/bin/sh
</span></span><span class="line"><span class="cl">/bin/bash
</span></span><span class="line"><span class="cl">/usr/bin/sh
</span></span><span class="line"><span class="cl">/usr/bin/bash
</span></span></code></pre></div><p>　　要想知道 bash 在操作系统中具体的位置，可通过以下命令查看：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># which bash sh</span>
</span></span><span class="line"><span class="cl">/usr/bin/bash
</span></span><span class="line"><span class="cl">/usr/bin/sh
</span></span></code></pre></div>

<h4 class="relative group">She Bang 
    <div id="she-bang" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#she-bang" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　<strong>She Bang</strong> 是 Shell 脚本开头字符<code>#!</code>也可以叫 <strong>Sha Bang</strong>，当 Shell 文件被 Linux 系统读取时，内核会通过<code>#!</code>表示的值（<code>0x23, 0x21</code>）识别出随后的解释器路径并调用，最后再将整个脚本内容传递给解释器。由于 Shell 当中<code>#</code>字符同时表示注释，因此 Shell 解释脚本文件时会自动忽略该行。</p>
<p>　　总结：<code>#!</code>就是告诉系统解释此脚本文件的 Shell 程序在哪（其后路径所指定的程序）。例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World!&#34;</span>
</span></span></code></pre></div><p>　　She Bang 的格式很重要，格式不正确会导致命令工作不正常。因此，在创建脚本时，要始终记住 She Bang 格式的这两点：</p>
<ul>
<li>它应该始终在脚本的第一行。</li>
<li>在<code>#!</code>和解释器的路径之间，<code>#</code>之前不应有任何空格。</li>
</ul>
<blockquote>
<p><code>echo</code>是 bash 中的内置命令，用于通过传递参数来显示标准输出。它是用于将文本/字符串行打印到屏幕上的最广泛使用的命令。</p>
</blockquote>


<h3 class="relative group">脚本 
    <div id="%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　在计算机编程中，脚本是用于适当的运行时环境的一组命令，这些命令用于自动执行任务。</p>
<p>　　我们经常说的 Shell 脚本，其实就是利用 Shell 的功能，编写能够直接运行的脚本文件。</p>


<h2 class="relative group">第一个 Shell 脚本 
    <div id="%E7%AC%AC%E4%B8%80%E4%B8%AA-shell-%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-shell-%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>　　几乎所有的编程语言教程都是从著名的“Hello World”开始，出于对这种传统的尊重，我们的第一个 Shell 脚本也输出“Hello World”。</p>
<p>　　打开文本编辑器，新建一个文本文件，并命名为 hello.sh。</p>
<blockquote>
<p>扩展名<code>sh</code>代表 shell，扩展名并不影响脚本执行，见名知意就好。</p>
</blockquote>
<p>　　在 hello.sh 中输入代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World!&#34;</span>
</span></span></code></pre></div><p>　　<code>#!</code>是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell；后面的<code>/bin/bash</code>就是指明了解释器的具体位置。</p>
<p>　　<code>echo</code>命令用于向标准输出文件（Standard Output，stdout，一般就是指显示器）输出文本。在<code>.sh</code>文件中使用命令与在终端直接输入命令的效果是一样的。</p>
<p>　　接下来使用<code>bash</code>或<code>sh</code>运行脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span></code></pre></div>

<h2 class="relative group">Shell 脚本执行 
    <div id="shell-%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>　　脚本的执行并非只有<code>bash</code>和<code>sh</code>，还有<code>source</code>和<code>.</code>且它们之间还存在一些细微的差异，接下来我们详细的给大家讲解一下。</p>


<h3 class="relative group">使用路径 
    <div id="%E4%BD%BF%E7%94%A8%E8%B7%AF%E5%BE%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BD%BF%E7%94%A8%E8%B7%AF%E5%BE%84" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　格式：<code>相对路径/脚本.sh</code>或<code>绝对路径/脚本.sh</code>。</p>
<p>　　注意：脚本文件必须为可执行文件（拥有 x 权限）。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ls -l</span>
</span></span><span class="line"><span class="cl">total <span class="m">4</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root    <span class="m">33</span> May <span class="m">29</span> 11:57 hello.sh
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># /root/hello.sh</span>
</span></span><span class="line"><span class="cl">bash: /root/hello.sh: Permission denied
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># chmod ug+x hello.sh </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ./hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># /root/hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span></code></pre></div>

<h3 class="relative group">bash 或 sh 
    <div id="bash-%E6%88%96-sh" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#bash-%E6%88%96-sh" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　格式：<code>bash 脚本.sh</code>或<code>sh 脚本.sh</code>。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ls -l</span>
</span></span><span class="line"><span class="cl">total <span class="m">4</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root <span class="m">33</span> May <span class="m">29</span> 11:57 hello.sh
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># sh hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span></code></pre></div>

<h3 class="relative group">source 或 <code>.</code> 
    <div id="source-%E6%88%96-" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#source-%E6%88%96-" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　格式：<code>source 脚本.sh</code>或<code>. 脚本.sh</code></p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ls -l</span>
</span></span><span class="line"><span class="cl">total <span class="m">4</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root <span class="m">33</span> May <span class="m">29</span> 11:57 hello.sh
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># . hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># source hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span></code></pre></div>

<h3 class="relative group">区别 
    <div id="%E5%8C%BA%E5%88%AB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%8C%BA%E5%88%AB" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　bash 或 sh 执行脚本时会新开一个 bash，不同 bash 中的变量无法共享。而 source 或 <code>.</code> 是在同一个 bash 里面执行的，所以变量可以共享。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># cat hello.sh </span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># name=mrhelloworld</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># sh hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># . hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl">mrhelloworld
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># source hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl">mrhelloworld
</span></span></code></pre></div><p>　　在脚本中添加<code>ping baidu.com</code>的指令，用不同的方式重新执行脚本并查看进程。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo &#34;ping baidu.com&#34; &gt;&gt; hello.sh </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># cat hello.sh </span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">ping baidu.com
</span></span></code></pre></div><p>　　bash：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash hello.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef</span>
</span></span><span class="line"><span class="cl">root       <span class="m">4447</span>   <span class="m">4445</span>  <span class="m">0</span> 12:15 pts/0    00:00:00 -bash
</span></span><span class="line"><span class="cl">root       <span class="m">4494</span>   <span class="m">4447</span>  <span class="m">0</span> 12:17 pts/0    00:00:00 bash hello.sh
</span></span><span class="line"><span class="cl">root       <span class="m">4495</span>   <span class="m">4494</span>  <span class="m">0</span> 12:17 pts/0    00:00:00 ping baidu.com
</span></span></code></pre></div><p>　　sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># sh hello.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef</span>
</span></span><span class="line"><span class="cl">root       <span class="m">4447</span>   <span class="m">4445</span>  <span class="m">0</span> 12:15 pts/0    00:00:00 -bash
</span></span><span class="line"><span class="cl">root       <span class="m">4497</span>   <span class="m">4447</span>  <span class="m">0</span> 12:18 pts/0    00:00:00 sh hello.sh
</span></span><span class="line"><span class="cl">root       <span class="m">4498</span>   <span class="m">4497</span>  <span class="m">0</span> 12:18 pts/0    00:00:00 ping baidu.com
</span></span></code></pre></div><p>　　source：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># source hello.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef</span>
</span></span><span class="line"><span class="cl">root       <span class="m">4447</span>   <span class="m">4445</span>  <span class="m">0</span> 12:15 pts/0    00:00:00 -bash
</span></span><span class="line"><span class="cl">root       <span class="m">4502</span>   <span class="m">4447</span>  <span class="m">0</span> 12:19 pts/0    00:00:00 ping baidu.com
</span></span></code></pre></div><p>　　<code>.</code>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># . hello.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ps -ef</span>
</span></span><span class="line"><span class="cl">root       <span class="m">4447</span>   <span class="m">4445</span>  <span class="m">0</span> 12:15 pts/0    00:00:00 -bash
</span></span><span class="line"><span class="cl">root       <span class="m">4508</span>   <span class="m">4447</span>  <span class="m">0</span> 12:25 pts/0    00:00:00 ping baidu.com
</span></span></code></pre></div><p>　　怎么解决这个问题呢？可以使用<code>export</code>命令，它可以将当前进程的变量传递给子进程去使用，如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># export name=mrhelloworld</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash hello.sh </span>
</span></span><span class="line"><span class="cl">Hello World!
</span></span><span class="line"><span class="cl">mrhelloworld
</span></span></code></pre></div><p>　　所以，将来在配置环境变量（profile 文件）的时候，所有的变量前必须加<code>export</code>。</p>


<h2 class="relative group">Shell 基础 
    <div id="shell-%E5%9F%BA%E7%A1%80" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E5%9F%BA%E7%A1%80" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">注释 
    <div id="%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">单行注释 
    <div id="%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　要在 bash 中编写单行注释，必须在注释的开头使用井号<code>#</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 我是注释</span>
</span></span></code></pre></div>

<h4 class="relative group">多行注释 
    <div id="%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　有两种方法可以在 bash 脚本中插入多行注释：</p>
<ul>
<li>通过在<code>&lt;&lt; COMMENT</code>和<code>COMMENT</code>之间加上注释，可以在 bash 脚本中编写多行注释。</li>
<li>也可以通过将注释括在<code>: '</code>和单引号<code>'</code>之间来编写多行注释。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World!&#34;</span>
</span></span></code></pre></div><blockquote>
<p>提示：EOF 表示 End Of File，表示文件结尾，这里代指从哪开始到哪结束。EOF 只是一个名称而已，可以使用任意非关键字名称进行替换，例如 COMMENT，通常都使用 EOF。</p>
</blockquote>
<p>　　或者：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">: <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s1">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s1">我是注释
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World&#34;</span>
</span></span></code></pre></div>

<h3 class="relative group">变量 
    <div id="%E5%8F%98%E9%87%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%8F%98%E9%87%8F" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">语法 
    <div id="%E8%AF%AD%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%AF%AD%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　变量是将数据或有用的信息作为值存储的容器。变量的值可以更改，并且可以多次使用。变量是任何类型的数据（例如整数，浮点数，字符等）的临时存储。</p>
<p>　　定义变量时，变量名不加<code>$</code>符号，而引用变量时则需要使用<code>$</code>。同其他编程语言一样，Shell 的变量声明也需要遵循一定的规则：</p>
<ul>
<li>可以包含字母，数字和下划线。</li>
<li>只能以字母和下划线开头，不能定义以任何数字开头的变量名称。</li>
<li>严格区分大小写。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>变量名称与值之间的等号<code>=</code>的两侧不能有空格。</li>
<li>不能使用 bash 里的关键字（可用 help 命令查看保留关键字）。</li>
</ul>
<p>　　Shell 声明变量的语法格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">variable</span><span class="o">=</span>value
</span></span><span class="line"><span class="cl"><span class="nv">variable</span><span class="o">=</span><span class="s1">&#39;value&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">variable</span><span class="o">=</span><span class="s2">&#34;value&#34;</span>
</span></span></code></pre></div><p>　　variable 是变量名，value 是赋给变量的值。如果 value 不包含任何空白符（例如空格、Tab 缩进等），那么可以不使用引号；如果 value 包含了空白符，那么就必须使用引号包围起来。使用单引号和使用双引号也是有区别的，稍后我们会详细说明。</p>
<p>　　变量定义举例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 变量的声明与赋值</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;zhangsan&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 变量的调用</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$name</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 修改变量的值，已定义的变量，可以被重新赋值</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;lisi&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 只读变量</span>
</span></span><span class="line"><span class="cl"><span class="nv">url</span><span class="o">=</span><span class="s2">&#34;https://www.baidu.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">readonly</span> url
</span></span><span class="line"><span class="cl"><span class="c1"># 测试只读变量是否可以被修改</span>
</span></span><span class="line"><span class="cl"><span class="nv">url</span><span class="o">=</span><span class="s2">&#34;https://www.google.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 删除变量</span>
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> name
</span></span><span class="line"><span class="cl"><span class="c1"># 将命令结果复制给变量</span>
</span></span><span class="line"><span class="cl"><span class="nv">info</span><span class="o">=</span><span class="sb">`</span>ls /usr/<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nv">info</span><span class="o">=</span><span class="k">$(</span>ls /usr/<span class="k">)</span>
</span></span></code></pre></div><p>　　调用变量时，变量名外面的花括号<code>{}</code>是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界，比如下面这种情况：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">skill</span><span class="o">=</span><span class="s2">&#34;Shell&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;I am good at </span><span class="si">${</span><span class="nv">skill</span><span class="si">}</span><span class="s2">Script&#34;</span>
</span></span></code></pre></div><p>　　如果不给 skill 变量加花括号，写成<code>echo &quot;I am good at $skillScript&quot;</code>，解释器就会把<code>$skillScript</code>当成一个变量（其值为空），代码执行结果就不是我们期望的样子了。</p>
<blockquote>
<p>调用变量时，推荐给所有变量加上花括号<code>{}</code>，这是个良好的编程习惯。</p>
</blockquote>
<p>　　Shell 也支持将命令的执行结果赋值给变量，常见的有以下两种方式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">variable</span><span class="o">=</span><span class="sb">`</span><span class="nb">command</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nv">variable</span><span class="o">=</span><span class="k">$(</span><span class="nb">command</span><span class="k">)</span>
</span></span></code></pre></div><p>　　第一种方式把命令用反引号（位于 Esc 键的下方）包围起来，反引号和单引号非常相似，容易产生混淆，所以不推荐使用这种方式；第二种方式把命令用<code>$()</code>包围起来，区分更加明显，所以推荐使用这种方式。</p>


<h4 class="relative group">类型 
    <div id="%E7%B1%BB%E5%9E%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%B1%BB%E5%9E%8B" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>局部变量：局部变量在脚本或命令中定义，仅在当前 Shell 实例中有效，其他 Shell 启动的程序不能访
问局部变量。例如，不同会话创建的变量无法互相访问。</li>
<li>环境变量：所有的程序，包括 Shell 启动的程序，都能访问环境变量，有些程序需要环境变量来保证
其正常运行。</li>
<li>Shell 变量：Shell 变量是由 Shell 程序设置的特殊变量。Shell 变量中有一部分是环境变量，有一部分是
局部变量。例如：</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># bash 在操作系统中具体的位置</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">BASH</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># bash 版本信息</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">BASH_VERSION</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 操作系统的类型</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$OSTYPE</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 当前登录用户</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">USERNAME</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 当前用户家目录</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 当前的工作目录</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>
</span></span></code></pre></div>

<h3 class="relative group">引号 
    <div id="%E5%BC%95%E5%8F%B7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%BC%95%E5%8F%B7" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　当希望变量存储更复杂的值时，就需要使用引号。引号用于处理带有空格字符的文本和文件名。这是因为 Bash 使用空格来确定单独的项目。在 Shell 中，变量的值可以由单引号<code>' '</code>包围，也可以由双引号<code>&quot; &quot;</code>包围，它们到底有什么区别呢？不妨以下面的代码为例来说明：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;zhangsan&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;My name is ${name}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;My name is </span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>　　运行结果如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">My name is <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">My name is zhangsan
</span></span></code></pre></div><p>　　单引号<code>' '</code>包围变量的值时，单引号里面是什么就输出什么，即使内容中有变量和命令（命令需要反引起来）也会把它们原样输出。这种方式比较适合定义显示纯字符串的情况，即不希望解析变量、命令等的场景。</p>
<p>　　双引号<code>&quot; &quot;</code>包围变量的值时，输出时会先解析里面的变量和命令，而不是把双引号中的变量名和命令原样输出。这种方式比较适合字符串中附带有变量和命令并且想将其解析后再输出的变量定义。</p>


<h3 class="relative group">位置参数 
    <div id="%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　运行 Shell 脚本文件时我们还可以给它传递一些参数，这些参数在脚本文件内部可以使用<code>$n</code>的形式来接收。例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数，依次类推。</p>
<p>　　这种通过<code>$n</code>的形式来接收的参数，在 Shell 中称为位置参数。在讲解变量的命名时，我们提到变量的名字必须以字母或者下划线开头，不能以数字开头；但是位置参数却偏偏是数字，这和变量的命名规则是相悖的，所以我们将它们视为“特殊变量”。</p>
<blockquote>
<p>注意：如果参数个数太多，达到或者超过了 10 个，那么就得用<code>${n}</code>的形式来接收了，例如 ${10}、${23}。<code>{}</code>的作用是为了帮助解释器识别参数的边界，这跟使用变量时加<code>{}</code>是一样的效果。</p>
</blockquote>
<p>　　除了<code>$n</code>，Shell 中还有<code>$#</code>、<code>$*</code>、<code>$@</code>、<code>$?</code>、<code>$$</code>几个特殊参数，我们将在下节讲解。</p>
<p>　　范例 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;name: </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;age: </span><span class="nv">$2</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>　　运行 test.sh，并附带参数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh zhangsan 18</span>
</span></span><span class="line"><span class="cl">name: zhangsan
</span></span><span class="line"><span class="cl">age: <span class="m">18</span>
</span></span></code></pre></div>

<h3 class="relative group">特殊变量 
    <div id="%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　上节我们讲到了 $n，它是特殊变量的一种，用来接收位置参数。本节我们继续讲解剩下的几个特殊变量，它们分别是：$#、$*、$@、$?、$$。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>$$</td>
<td>当前 Shell 进程 ID。对于 Shell 脚本，就是这些脚本所在的进程 ID。</td>
</tr>
<tr>
<td>$0</td>
<td>当前脚本的文件名。</td>
</tr>
<tr>
<td>$n</td>
<td>传递给脚本或函数的参数。n 为数字，表示第几个参数。例如，第一个参数是 $1，第二个参数是 $2。</td>
</tr>
<tr>
<td>$@</td>
<td>传递给脚本或函数的所有参数。</td>
</tr>
<tr>
<td>$*</td>
<td>传递给脚本或函数的所有参数。当被双引号<code>&quot; &quot;</code>包含时，$@ 与 $* 稍有不同。</td>
</tr>
<tr>
<td>$#</td>
<td>传递给脚本或函数的参数个数。</td>
</tr>
<tr>
<td>$?</td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>$*</code>和<code>$@</code>作用都是获取传递给脚本或函数的所有参数。在没有被双引号包围时，两者没有区别，接收到的每个参数都是独立的，用空格分隔。</p>
<p>当被双引号包围时，<code>$@</code>与没有被双引号包围时没有变化，每个参数依然是独立的。但是<code>$*</code>被双引号包围时，会将所有参数看作一个整体。</p>
<p><code>$?</code>是一个特殊变量，用来获取上一个命令的退出状态，或者上一个函数的返回值。所谓退出状态，就是上一个命令执行后的返回结果。退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1，这和 C 语言的 main() 函数是类似的。</p>
</blockquote>
<p>　　范例 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Process ID: </span><span class="nv">$$</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;File Name: </span><span class="nv">$0</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;First Parameter: </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Second Parameter: </span><span class="nv">$2</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;All parameters 1: </span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;All parameters 2: </span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Total: </span><span class="nv">$#</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;--------------------&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="si">${</span><span class="nv">var</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;--------------------&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="si">${</span><span class="nv">var</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>　　运行 test.sh，并附带参数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh Linux Shell</span>
</span></span><span class="line"><span class="cl">Process ID: <span class="m">4779</span>
</span></span><span class="line"><span class="cl">File Name: test.sh
</span></span><span class="line"><span class="cl">First Parameter: Linux
</span></span><span class="line"><span class="cl">Second Parameter: Shell
</span></span><span class="line"><span class="cl">All parameters 1: Linux Shell
</span></span><span class="line"><span class="cl">All parameters 2: Linux Shell
</span></span><span class="line"><span class="cl">Total: <span class="m">2</span>
</span></span><span class="line"><span class="cl">--------------------
</span></span><span class="line"><span class="cl">Linux
</span></span><span class="line"><span class="cl">Shell
</span></span><span class="line"><span class="cl">--------------------
</span></span><span class="line"><span class="cl">Linux Shell
</span></span></code></pre></div><p>　　<code>$?</code>是一个特殊变量，用来获取上一个命令的退出状态，或者上一个函数的返回值。所谓退出状态，就是上一个命令执行后的返回结果。退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1，这和C语言的 main() 函数是类似的。不过，也有一些命令返回其他值，表示不同类型的错误。</p>
<p>　　范例1，$? 获取上一个命令的退出状态。test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="m">100</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">exit</span> <span class="m">0</span>  <span class="c1"># 参数正确，退出状态为 0</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">exit</span> <span class="m">1</span>  <span class="c1"># 参数错误，退出状态 1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>　　例如，运行 test.sh 时传递参数 100：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh 100</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo $?</span>
</span></span><span class="line"><span class="cl"><span class="m">0</span>
</span></span></code></pre></div><p>　　再如，运行 test.sh 时传递参数 50：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh 50</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo $?</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span></code></pre></div><p>　　范例2，$? 获取函数的返回值。test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 得到两个数相加的和</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> add<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="sb">`</span>expr <span class="nv">$1</span> + <span class="nv">$2</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 调用函数</span>
</span></span><span class="line"><span class="cl">add <span class="m">20</span> <span class="m">30</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$?</span>  <span class="c1"># 获取函数返回值</span>
</span></span></code></pre></div><p>　　运行结果如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh </span>
</span></span><span class="line"><span class="cl"><span class="m">50</span>
</span></span></code></pre></div><p>　　有 C++、C#、Java 等编程经验的读者请注意：严格来说，Shell 函数中的 return 关键字用来表示函数的退出状态，而不是函数的返回值；Shell 不像其它编程语言，没有专门处理返回值的关键字。</p>
<p>　　范例 2 在其它编程语言中没有任何问题，但是在 Shell 中是非常错误的，Shell 函数的返回值和其它编程语言大有不同，我们将在后面的 Shell 函数返回值中展开讨论。</p>


<h3 class="relative group">字符串 
    <div id="%E5%AD%97%E7%AC%A6%E4%B8%B2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">定义 
    <div id="%E5%AE%9A%E4%B9%89" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%AE%9A%E4%B9%89" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　字符串（String）就是一系列字符的组合。字符串是 Shell 编程中最常用的数据类型之一（除了数字和字符串，也没有其他类型了）。</p>
<p>　　字符串可以由单引号<code>' '</code>包围，也可以由双引号<code>&quot; &quot;</code>包围，也可以不用引号。</p>
<ul>
<li>
<p>由单引号<code>' '</code>包围的字符串：</p>
<ul>
<li>
<p>任何字符都会原样输出，在其中使用变量是无效的。</p>
</li>
<li>
<p>字符串中不能出现单引号，即使对单引号进行转义（<code>\'</code>）也不行。</p>
</li>
</ul>
</li>
<li>
<p>由双引号<code>&quot; &quot;</code>包围的字符串：</p>
<ul>
<li>
<p>如果其中包含了某个变量，那么该变量会被解析（得到该变量的值），而不是原样输出。</p>
</li>
<li>
<p>字符串中可以出现双引号，只要它被转义（<code>\&quot;</code>）就行。</p>
</li>
</ul>
</li>
<li>
<p>不被引号包围的字符串：</p>
<ul>
<li>
<p>不被引号包围的字符串中出现变量时也会被解析，这一点和双引号<code>&quot; &quot;</code>包围的字符串一样。</p>
</li>
<li>
<p>字符串中不能出现空格，否则空格后边的字符串会作为其他变量或者命令解析。</p>
</li>
</ul>
</li>
</ul>


<h4 class="relative group">长度 
    <div id="%E9%95%BF%E5%BA%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E9%95%BF%E5%BA%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　在 Shell 中获取字符串长度很简单，具体方法如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># name=mrhelloworld</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${#name}</span>
</span></span><span class="line"><span class="cl"><span class="m">12</span>
</span></span></code></pre></div>

<h4 class="relative group">拼接 
    <div id="%E6%8B%BC%E6%8E%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%8B%BC%E6%8E%A5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　在脚本语言中，字符串的拼接（也称字符串连接或者字符串合并）往往都非常简单，例如：</p>
<ul>
<li>在 PHP 中，使用 . 即可连接两个字符串；</li>
<li>在 JavaScript 中，使用 + 即可将两个字符串合并为一个。</li>
</ul>
<p>　　然而，在 Shell 中你不需要使用任何运算符，只需要将两个字符串并排放在一起就能实现拼接，非常简单粗暴。范例 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;zhangsan&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">age</span><span class="o">=</span><span class="m">18</span>
</span></span><span class="line"><span class="cl"><span class="nv">str1</span><span class="o">=</span><span class="nv">$name$age</span>  <span class="c1"># 中间不能有空格</span>
</span></span><span class="line"><span class="cl"><span class="nv">str2</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$name</span><span class="s2"> </span><span class="nv">$age</span><span class="s2">&#34;</span>  <span class="c1"># 如果被双引号包围，那么中间可以有空格</span>
</span></span><span class="line"><span class="cl"><span class="nv">str3</span><span class="o">=</span><span class="nv">$name</span><span class="s2">&#34;: &#34;</span><span class="nv">$age</span>  <span class="c1"># 中间可以出现别的字符串</span>
</span></span><span class="line"><span class="cl"><span class="nv">str4</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$name</span><span class="s2">: </span><span class="nv">$age</span><span class="s2">&#34;</span>  <span class="c1"># 这样写也可以</span>
</span></span><span class="line"><span class="cl"><span class="nv">str5</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">同学: </span><span class="si">${</span><span class="nv">age</span><span class="si">}</span><span class="s2">岁&#34;</span>  <span class="c1"># 这个时候需要给变量名加上大括号</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$str1</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$str2</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$str3</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$str4</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$str5</span>
</span></span></code></pre></div><p>　　运行 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh </span>
</span></span><span class="line"><span class="cl">zhangsan18
</span></span><span class="line"><span class="cl">zhangsan <span class="m">18</span>
</span></span><span class="line"><span class="cl">zhangsan: <span class="m">18</span>
</span></span><span class="line"><span class="cl">zhangsan: <span class="m">18</span>
</span></span><span class="line"><span class="cl">zhangsan同学: 18岁
</span></span></code></pre></div>

<h4 class="relative group">截取 
    <div id="%E6%88%AA%E5%8F%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%88%AA%E5%8F%96" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　Shell 截取字符串通常有两种方式：</p>
<ul>
<li>从指定位置开始截取</li>
<li>从指定字符（子字符串）开始截取</li>
</ul>


<h5 class="relative group">从指定位置开始截取 
    <div id="%E4%BB%8E%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E5%BC%80%E5%A7%8B%E6%88%AA%E5%8F%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BB%8E%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E5%BC%80%E5%A7%8B%E6%88%AA%E5%8F%96" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>　　这种方式需要两个参数：除了指定起始位置，还需要截取长度，才能最终确定要截取的字符串。</p>
<p>　　既然需要指定起始位置，那么就涉及到计数方向的问题，到底是从字符串左边开始计数，还是从字符串右边开始计数。答案是 Shell 同时支持两种计数方式。</p>
<p>　　如果想<strong>从字符串的左边开始计数</strong>，那么截取字符串的具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">string</span><span class="p">:</span><span class="nv">start</span><span class="p">:</span><span class="nv">length</span><span class="si">}</span>
</span></span></code></pre></div><p>　　其中，string 是要截取的字符串，start 是起始位置（从左边开始，从 0 开始计数），length 是要截取的长度（省略的话表示直到字符串的末尾）。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># name=mrhelloworld</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${name:2}</span>
</span></span><span class="line"><span class="cl">helloworld
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${name:2:5}</span>
</span></span><span class="line"><span class="cl">hello
</span></span></code></pre></div><p>　　如果想<strong>从字符串的右边开始计数</strong>，那么截取字符串的具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">string</span><span class="p">:</span><span class="nv">0</span><span class="p">-start:</span><span class="nv">length</span><span class="si">}</span>
</span></span></code></pre></div><p>　　相比从左边开始计数仅仅多了<code>0-</code>，这是固定的写法，专门用来表示从字符串右边开始计数。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># name=mrhelloworld</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${name:0-5}</span>
</span></span><span class="line"><span class="cl">world
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${name:0-10}</span>
</span></span><span class="line"><span class="cl">helloworld
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${name:0-10:5}</span>
</span></span><span class="line"><span class="cl">hello
</span></span></code></pre></div>

<h5 class="relative group">从指定字符（子字符串）开始截取 
    <div id="%E4%BB%8E%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BC%80%E5%A7%8B%E6%88%AA%E5%8F%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BB%8E%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BC%80%E5%A7%8B%E6%88%AA%E5%8F%96" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>　　这种截取方式无法指定字符串长度，只能从指定字符（子字符串）截取到字符串末尾。Shell 可以截取指定字符（子字符串）右边的所有字符，也可以截取左边的所有字符。</p>
<p>　　使用<code>#</code>号可以截取指定字符（或者子字符串）右边的所有字符，具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">string</span><span class="p">#*chars</span><span class="si">}</span>
</span></span></code></pre></div><p>　　其中，string 表示要截取的字符串，chars 是指定的字符（或者子字符串），<code>*</code>是通配符的一种，表示任意长度的字符串。<code>*chars</code>连起来使用的意思是：忽略左边的所有字符，直到遇见 chars（chars 不会被截取）。</p>
<p>　　范例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># url=https://www.yjxxt.com</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url#*https://}</span>
</span></span><span class="line"><span class="cl">www.yjxxt.com
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url#*://}</span>
</span></span><span class="line"><span class="cl">www.yjxxt.com
</span></span></code></pre></div><p>　　注意，以上写法遇到第一个匹配的字符（子字符串）就结束了，如果希望直到最后一个指定字符（子字符串）再匹配结束，那么可以使用<code>##</code>。例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url#*.}</span>
</span></span><span class="line"><span class="cl">yjxxt.com
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url##*.}</span>
</span></span><span class="line"><span class="cl">com
</span></span></code></pre></div><p>　　使用<code>%</code>号可以截取指定字符（或者子字符串）左边的所有字符，具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">string</span><span class="p">%chars*</span><span class="si">}</span>
</span></span></code></pre></div><p>　　请注意<code>*</code>的位置，因为要截取 chars 左边的字符，而忽略 chars 右边的字符，所以<code>*</code>应该位于 chars 的右侧。其他方面<code>%</code>和<code>#</code>的用法相同，这里不再赘述，仅举例说明：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># url=https://www.yjxxt.com</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url%www*}</span>
</span></span><span class="line"><span class="cl">https://
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url%.*}</span>
</span></span><span class="line"><span class="cl">https://www.yjxxt
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${url%%.*}</span>
</span></span><span class="line"><span class="cl">https://www
</span></span></code></pre></div>

<h5 class="relative group">总结 
    <div id="%E6%80%BB%E7%BB%93" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%80%BB%E7%BB%93" aria-label="锚点">#</a>
    </span>        
    
</h5>
<table>
<thead>
<tr>
<th>格式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>${string:start:length}</td>
<td>从 string 字符串的左边第 start 个字符开始，向右截取 length 个字符。</td>
</tr>
<tr>
<td>${string:start}</td>
<td>从 string 字符串的左边第 start 个字符开始截取，向右直到最后。</td>
</tr>
<tr>
<td>${string:0-start:length}</td>
<td>从 string 字符串的右边第 start 个字符开始，向左截取 length 个字符。</td>
</tr>
<tr>
<td>${string:0-start}</td>
<td>从 string 字符串的右边第 start 个字符开始截取，向左直到最后。</td>
</tr>
<tr>
<td>${string#*chars}</td>
<td>从 string 字符串第一次出现 *chars 的位置开始，截取 *chars 右边的所有字符。</td>
</tr>
<tr>
<td>${string##*chars}</td>
<td>从 string 字符串最后一次出现 *chars 的位置开始，截取 *chars 右边的所有字符。</td>
</tr>
<tr>
<td>${string%*chars}</td>
<td>从 string 字符串第一次出现 *chars 的位置开始，截取 *chars 左边的所有字符。</td>
</tr>
<tr>
<td>${string%%*chars}</td>
<td>从 string 字符串最后一次出现 *chars 的位置开始，截取 *chars 左边的所有字符。</td>
</tr>
</tbody>
</table>


<h3 class="relative group">数组 
    <div id="%E6%95%B0%E7%BB%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%95%B0%E7%BB%84" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　和其他编程语言一样，Shell 也支持数组。数组（Array）是若干数据的集合，其中的每一份数据都称为元素（Element）。</p>
<p>　　Shell 没有限制数组的大小，理论上可以存放无限量的数据。和 C++、Java 等类似，Shell 数组元素的下标也是从 0 开始计数。</p>
<p>　　获取数组中的元素要使用下标<code>[index]</code>，下标可以是一个整数，也可以是一个结果为整数的表达式；当然，下标必须大于等于 0。遗憾的是，常用的 Bash Shell 只支持一维数组，不支持多维数组。</p>


<h4 class="relative group">定义 
    <div id="%E5%AE%9A%E4%B9%89-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%AE%9A%E4%B9%89-1" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　在 Shell 中，用括号<code>()</code>来表示数组，数组元素之间用<strong>空格</strong>来分隔。由此，定义数组的一般形式为：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">array_name</span><span class="o">=(</span>ele1  ele2  ele3 ... elen<span class="o">)</span>
</span></span></code></pre></div><p>　　Shell 是弱类型的，它并不要求所有数组元素的类型必须相同，例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">arr</span><span class="o">=(</span><span class="m">20</span> <span class="m">56</span> <span class="s2">&#34;mrhelloworld&#34;</span><span class="o">)</span>
</span></span></code></pre></div><p>　　Shell 数组的长度不是固定的，定义之后还可以增加元素。例如，对于上面的 arr 数组，它的长度是 3，使用下面的代码会在最后增加一个元素，使其长度扩展到 4：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nums<span class="o">[</span>3<span class="o">]=</span><span class="m">88</span>
</span></span></code></pre></div><p>　　此外，Shell 还支持只给特定元素赋值：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">ages</span><span class="o">=([</span>3<span class="o">]=</span><span class="m">24</span> <span class="o">[</span>5<span class="o">]=</span><span class="m">19</span> <span class="o">[</span>10<span class="o">]=</span>12<span class="o">)</span>
</span></span></code></pre></div><p>　　以上代码就只给第 3、5、10 个元素赋值，所以数组长度是 3。</p>


<h4 class="relative group">获取 
    <div id="%E8%8E%B7%E5%8F%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%8E%B7%E5%8F%96" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　获取数组元素的值，一般使用下面的格式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">array_name</span><span class="p">[index]</span><span class="si">}</span>
</span></span></code></pre></div><p>　　其中，array_name 是数组名，index 是下标。例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${arr[2]}</span>
</span></span><span class="line"><span class="cl">mrhelloworld
</span></span></code></pre></div><p>　　使用<code>@</code>或<code>*</code>可以获取数组中的所有元素，例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${arr[*]}</span>
</span></span><span class="line"><span class="cl"><span class="m">20</span> <span class="m">56</span> mrhelloworld
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${ages[@]}</span>
</span></span><span class="line"><span class="cl"><span class="m">24</span> <span class="m">19</span> <span class="m">12</span>
</span></span></code></pre></div>

<h4 class="relative group">长度 
    <div id="%E9%95%BF%E5%BA%A6-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E9%95%BF%E5%BA%A6-1" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　所谓数组长度，就是数组元素的个数。使用<code>@</code>或<code>*</code>可以获取数组中的所有元素，然后使用<code>#</code>来获取数组元素的个数，所以获取数组长度的语法如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${#arr[@]}</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${#ages[*]}</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span>
</span></span></code></pre></div><p>　　如果某个元素是字符串，还可以通过指定下标的方式获得该元素的长度，如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># echo ${#arr[2]}</span>
</span></span><span class="line"><span class="cl"><span class="m">12</span>
</span></span></code></pre></div>

<h4 class="relative group">拼接 
    <div id="%E6%8B%BC%E6%8E%A5-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%8B%BC%E6%8E%A5-1" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　所谓 Shell 数组拼接（数组合并），就是将两个数组连接成一个数组。</p>
<p>　　拼接数组的思路是：先利用<code>@</code>或<code>*</code>，将数组展开成列表，然后再合并到一起。具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">array_new</span><span class="o">=(</span><span class="si">${</span><span class="nv">array1</span><span class="p">[@]</span><span class="si">}</span>  <span class="si">${</span><span class="nv">array2</span><span class="p">[@]</span><span class="si">}</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">array_new</span><span class="o">=(</span><span class="si">${</span><span class="nv">array1</span><span class="p">[*]</span><span class="si">}</span>  <span class="si">${</span><span class="nv">array2</span><span class="p">[*]</span><span class="si">}</span><span class="o">)</span>
</span></span></code></pre></div><p>　　两种方式是等价的，选择其一即可。其中，array1 和 array2 是需要拼接的数组，array_new 是拼接后形成的新数组。</p>
<p>　　范例 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">array1</span><span class="o">=(</span><span class="m">23</span> 56<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">array2</span><span class="o">=(</span><span class="m">99</span> <span class="s2">&#34;mrhelloworld&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">array_new</span><span class="o">=(</span><span class="si">${</span><span class="nv">array1</span><span class="p">[@]</span><span class="si">}</span> <span class="si">${</span><span class="nv">array2</span><span class="p">[*]</span><span class="si">}</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">array_new</span><span class="p">[@]</span><span class="si">}</span>  <span class="c1"># 也可以写作 ${array_new[*]}</span>
</span></span></code></pre></div><p>　　运行结果如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh </span>
</span></span><span class="line"><span class="cl"><span class="m">23</span> <span class="m">56</span> <span class="m">99</span> mrhelloworld
</span></span></code></pre></div>

<h4 class="relative group">删除 
    <div id="%E5%88%A0%E9%99%A4" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%88%A0%E9%99%A4" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　在 Shell 中，使用 unset 关键字来删除数组元素，具体格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">unset</span> array_name<span class="o">[</span>index<span class="o">]</span>
</span></span></code></pre></div><p>　　其中，array_name 表示数组名，index 表示数组下标。</p>
<p>　　如果不写下标只写数组名，则表示删除整个数组，所有元素都会消失。</p>
<p>　　范例 test.sh：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">arr</span><span class="o">=(</span><span class="m">23</span> <span class="m">56</span> <span class="m">99</span> <span class="s2">&#34;mrhelloworld&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> arr<span class="o">[</span>1<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[@]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> arr
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[*]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;--------------------&#39;</span>
</span></span></code></pre></div><p>　　运行结果如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># bash test.sh </span>
</span></span><span class="line"><span class="cl"><span class="m">23</span> <span class="m">99</span> mrhelloworld
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--------------------
</span></span></code></pre></div>

<h2 class="relative group">Shell 高级 
    <div id="shell-%E9%AB%98%E7%BA%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E9%AB%98%E7%BA%A7" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">Shell 运算符 
    <div id="shell-%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　Shell 和其他编程语言一样，支持多种运算符，包括：</p>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>逻辑运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>


<h4 class="relative group">算数运算符 
    <div id="%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205162731120_hud48ddaa9de34f904cd4b470208cc76a9_31817_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205162731120_hud48ddaa9de34f904cd4b470208cc76a9_31817_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205162731120_hud48ddaa9de34f904cd4b470208cc76a9_31817_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205162731120_hud48ddaa9de34f904cd4b470208cc76a9_31817_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205162731120_hud48ddaa9de34f904cd4b470208cc76a9_31817_660x0_resize_box_3.png"
        alt="image-20201205162731120"
      />
      
    </figure>
</p>
<p>　　但是，Shell 和其它编程语言不同，Shell 不能直接进行算数运算，必须使用数学计算命令，这让初学者感觉很困惑，也让有经验的程序员感觉很奇葩。expr 是一款表达式计算工具，使用它能完成表达式的求值操作。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="k">$(</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a + b : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> - <span class="nv">$b</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a - b : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a * b : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$b</span> / <span class="nv">$a</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;b / a : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$b</span> % <span class="nv">$a</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;b % a : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h4 class="relative group">关系运算符 
    <div id="%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205162742536_hu3bddb3469641bcdac564c824d2df76d6_36028_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205162742536_hu3bddb3469641bcdac564c824d2df76d6_36028_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205162742536_hu3bddb3469641bcdac564c824d2df76d6_36028_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205162742536_hu3bddb3469641bcdac564c824d2df76d6_36028_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205162742536_hu3bddb3469641bcdac564c824d2df76d6_36028_660x0_resize_box_3.png"
        alt="image-20201205162742536"
      />
      
    </figure>
</p>
<p>　　<strong>关系运算符只支持数字</strong>，不支持字符串，除非字符串的值是数字。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -eq <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2"> : a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2">: a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -ne <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ne </span><span class="nv">$b</span><span class="s2">: a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ne </span><span class="nv">$b</span><span class="s2"> : a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -gt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -gt </span><span class="nv">$b</span><span class="s2">: a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -gt </span><span class="nv">$b</span><span class="s2">: a 不大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -lt </span><span class="nv">$b</span><span class="s2">: a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -lt </span><span class="nv">$b</span><span class="s2">: a 不小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -ge <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ge </span><span class="nv">$b</span><span class="s2">: a 大于或等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ge </span><span class="nv">$b</span><span class="s2">: a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -le <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -le </span><span class="nv">$b</span><span class="s2">: a 小于或等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -le </span><span class="nv">$b</span><span class="s2">: a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h4 class="relative group">逻辑运算符 
    <div id="%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205162802200_hu8effd8a75a60a120d04a83a63043c14e_17443_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205162802200_hu8effd8a75a60a120d04a83a63043c14e_17443_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205162802200_hu8effd8a75a60a120d04a83a63043c14e_17443_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205162802200_hu8effd8a75a60a120d04a83a63043c14e_17443_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205162802200_hu8effd8a75a60a120d04a83a63043c14e_17443_660x0_resize_box_3.png"
        alt="image-20201205162802200"
      />
      
    </figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2"> : a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> == </span><span class="nv">$b</span><span class="s2">: a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="m">100</span> -a <span class="nv">$b</span> -gt <span class="m">15</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 100 且 </span><span class="nv">$b</span><span class="s2"> 大于 15 : 返回 true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 100 且 </span><span class="nv">$b</span><span class="s2"> 大于 15 : 返回 false&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="m">100</span> -o <span class="nv">$b</span> -gt <span class="m">100</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 100 或 </span><span class="nv">$b</span><span class="s2"> 大于 100 : 返回 true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 100 或 </span><span class="nv">$b</span><span class="s2"> 大于 100 : 返回 false&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="m">5</span> -o <span class="nv">$b</span> -gt <span class="m">100</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 5 或 </span><span class="nv">$b</span><span class="s2"> 大于 100 : 返回 true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> 小于 5 或 </span><span class="nv">$b</span><span class="s2"> 大于 100 : 返回 false&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205162820041_hu0839d53cd481183806fa31bf04490b5e_10300_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205162820041_hu0839d53cd481183806fa31bf04490b5e_10300_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205162820041_hu0839d53cd481183806fa31bf04490b5e_10300_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205162820041_hu0839d53cd481183806fa31bf04490b5e_10300_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205162820041_hu0839d53cd481183806fa31bf04490b5e_10300_660x0_resize_box_3.png"
        alt="image-20201205162820041"
      />
      
    </figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> <span class="nv">$a</span> -lt <span class="m">100</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span> -gt <span class="m">100</span> <span class="o">]]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;返回 true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;返回 false&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> <span class="nv">$a</span> -lt <span class="m">100</span> <span class="o">||</span> <span class="nv">$b</span> -gt <span class="m">100</span> <span class="o">]]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;返回 true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;返回 false&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h4 class="relative group">字符串运算符 
    <div id="%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205162840963_hu863b760f7b19238ee16e0e6e5899ff04_26277_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205162840963_hu863b760f7b19238ee16e0e6e5899ff04_26277_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205162840963_hu863b760f7b19238ee16e0e6e5899ff04_26277_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205162840963_hu863b760f7b19238ee16e0e6e5899ff04_26277_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205162840963_hu863b760f7b19238ee16e0e6e5899ff04_26277_660x0_resize_box_3.png"
        alt="image-20201205162840963"
      />
      
    </figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="s2">&#34;abc&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="s2">&#34;efg&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> = </span><span class="nv">$b</span><span class="s2"> : a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> = </span><span class="nv">$b</span><span class="s2">: a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2"> : a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2">: a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -z <span class="nv">$a</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;-z </span><span class="nv">$a</span><span class="s2"> : 字符串长度为 0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;-z </span><span class="nv">$a</span><span class="s2"> : 字符串长度不为 0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2">&#34;</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;-n </span><span class="nv">$a</span><span class="s2"> : 字符串长度不为 0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;-n </span><span class="nv">$a</span><span class="s2"> : 字符串长度为 0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> : 字符串不为空&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> : 字符串为空&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h4 class="relative group">文件测试运算符 
    <div id="%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<table>
<thead>
<tr>
<th style="text-align:left">操作符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-b file</td>
<td style="text-align:left">检测文件是否是块设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-c file</td>
<td style="text-align:left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -c $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-d file</td>
<td style="text-align:left">检测文件是否是目录，如果是，则返回 true。</td>
<td style="text-align:left">[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-f file</td>
<td style="text-align:left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td style="text-align:left">[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-g file</td>
<td style="text-align:left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-k file</td>
<td style="text-align:left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td style="text-align:left">[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-p file</td>
<td style="text-align:left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td style="text-align:left">[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-u file</td>
<td style="text-align:left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:left">-r file</td>
<td style="text-align:left">检测文件是否可读，如果是，则返回 true。</td>
<td style="text-align:left">[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-w file</td>
<td style="text-align:left">检测文件是否可写，如果是，则返回 true。</td>
<td style="text-align:left">[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-x file</td>
<td style="text-align:left">检测文件是否可执行，如果是，则返回 true。</td>
<td style="text-align:left">[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-s file</td>
<td style="text-align:left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td style="text-align:left">[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:left">-e file</td>
<td style="text-align:left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">file</span><span class="o">=</span><span class="s2">&#34;/root/test.sh&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -r <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件可读&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不可读&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -w <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件可写&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不可写&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -x <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件可执行&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不可执行&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -f <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件为普通文件&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件为特殊文件&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -d <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件是个目录&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不是个目录&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -s <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不为空&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件为空&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -e <span class="nv">$file</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件存在&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;文件不存在&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h3 class="relative group">echo 打印数据 
    <div id="echo-%E6%89%93%E5%8D%B0%E6%95%B0%E6%8D%AE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#echo-%E6%89%93%E5%8D%B0%E6%95%B0%E6%8D%AE" aria-label="锚点">#</a>
    </span>        
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">## 显示普通字符串</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示转义字符</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;\&#34;Hello World\&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示变量</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;zhangsan&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$name</span><span class="s2"> Hello World&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示换行</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;OK! \n&#34;</span> 
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示不换行</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;OK! \c&#34;</span> 
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示结果定向至文件</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello World&#34;</span> &gt; myfile
</span></span><span class="line"><span class="cl"><span class="c1">## 原样输出字符串</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;$name\&#34;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示命令执行结果，推荐方式</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="k">$(</span>date<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 显示命令执行结果</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>date<span class="sb">`</span>
</span></span></code></pre></div>

<h3 class="relative group">test 命令 
    <div id="test-%E5%91%BD%E4%BB%A4" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#test-%E5%91%BD%E4%BB%A4" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　Shell 中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p>
<p>　　数字</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205170002064_huaaa7329c2ef96ebc84834325be9dddd6_12257_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205170002064_huaaa7329c2ef96ebc84834325be9dddd6_12257_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205170002064_huaaa7329c2ef96ebc84834325be9dddd6_12257_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205170002064_huaaa7329c2ef96ebc84834325be9dddd6_12257_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205170002064_huaaa7329c2ef96ebc84834325be9dddd6_12257_660x0_resize_box_3.png"
        alt=""
      />
      
    </figure>
</p>
<p>　　字符串</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205170027300_hu6a7100c47d5402197deca01a3877d26a_10682_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205170027300_hu6a7100c47d5402197deca01a3877d26a_10682_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205170027300_hu6a7100c47d5402197deca01a3877d26a_10682_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205170027300_hu6a7100c47d5402197deca01a3877d26a_10682_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205170027300_hu6a7100c47d5402197deca01a3877d26a_10682_660x0_resize_box_3.png"
        alt=""
      />
      
    </figure>
</p>
<p>　　文件测试</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20201205170113502_hue849b219cc19ba6630340eff30e9883f_33237_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20201205170113502_hue849b219cc19ba6630340eff30e9883f_33237_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20201205170113502_hue849b219cc19ba6630340eff30e9883f_33237_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20201205170113502_hue849b219cc19ba6630340eff30e9883f_33237_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20201205170113502_hue849b219cc19ba6630340eff30e9883f_33237_660x0_resize_box_3.png"
        alt=""
      />
      
    </figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 比较</span>
</span></span><span class="line"><span class="cl"><span class="nv">num1</span><span class="o">=</span><span class="m">100</span>
</span></span><span class="line"><span class="cl"><span class="nv">num2</span><span class="o">=</span><span class="m">100</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">test</span> $<span class="o">[</span>num1<span class="o">]</span> -eq $<span class="o">[</span>num2<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;两个数相等！&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;两个数不相等！&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h3 class="relative group">Shell 流程控制 
    <div id="shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">if 
    <div id="if" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#if" aria-label="锚点">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">if</span> condition1
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    command1
</span></span><span class="line"><span class="cl"><span class="k">elif</span> condition2 
</span></span><span class="line"><span class="cl"><span class="k">then</span> 
</span></span><span class="line"><span class="cl">    command2
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    commandN
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="nv">$a</span> -gt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;没有符合的条件&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div>

<h4 class="relative group">case 
    <div id="case" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#case" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>case 语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">case</span> 值 in
</span></span><span class="line"><span class="cl">模式1<span class="o">)</span>
</span></span><span class="line"><span class="cl">    command1
</span></span><span class="line"><span class="cl">    command2
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">    commandN
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">模式2<span class="o">)</span>
</span></span><span class="line"><span class="cl">    command1
</span></span><span class="line"><span class="cl">    command2
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">    commandN
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;输入 1 到 4 之间的数字:&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;你输入的数字为:&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> num
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$num</span> in
</span></span><span class="line"><span class="cl">    1<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;你选择了 1&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    2<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;你选择了 2&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    3<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;你选择了 3&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    4<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;你选择了 4&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    *<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;你没有输入 1 到 4 之间的数字&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span></code></pre></div>

<h4 class="relative group">for 
    <div id="for" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#for" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>
<p>当变量值在列表里，for循环即执行一次所有命令，使用变量名获取列表中的当前取值。</p>
</li>
<li>
<p>命令可为任何有效的shell命令和语句。in列表可以包含替换、字符串和文件名。</p>
</li>
<li>
<p>in列表是可选的，如果不用它，for循环使用命令行的位置参数。</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">for</span> var in item1 item2 ... itemN
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    command1
</span></span><span class="line"><span class="cl">    command2
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">    commandN
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">for</span> loop in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;The value is: </span><span class="nv">$loop</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> str in <span class="s1">&#39;This is a string&#39;</span>,<span class="s1">&#39;hello moto&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$str</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div>

<h4 class="relative group">while循环 
    <div id="while%E5%BE%AA%E7%8E%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#while%E5%BE%AA%E7%8E%AF" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>while 循环用于不断执行一系列命令，也用于从输入文件中读取数据；命令通常为测试条件。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> condition
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">command</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">#  Bash let 命令，它用于执行一个或多个表达式，变量计算中不需要加上 $ 来表示变量</span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">i</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="o">((</span> <span class="nv">$i</span>&lt;<span class="o">=</span><span class="m">5</span> <span class="o">))</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl">    <span class="nb">let</span> <span class="s2">&#34;i++&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 无限循环</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">command</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div>

<h4 class="relative group">break 
    <div id="break" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#break" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>break 命令允许跳出所有循环（终止执行后面的所有循环）。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;输入 1 到 5 之间的数字:&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nv">$aNum</span> in
</span></span><span class="line"><span class="cl">        1<span class="p">|</span>2<span class="p">|</span>3<span class="p">|</span>4<span class="p">|</span>5<span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;你输入的数字为 </span><span class="nv">$aNum</span><span class="s2">!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        *<span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;你输入的数字不是 1 到 5 之间的! 游戏结束&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="nb">break</span>
</span></span><span class="line"><span class="cl">            <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div>

<h4 class="relative group">continue 
    <div id="continue" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#continue" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>continue 命令不会跳出所有循环，仅仅跳出当前循环。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;输入 1 到 5 之间的数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nv">$aNum</span> in
</span></span><span class="line"><span class="cl">        1<span class="p">|</span>2<span class="p">|</span>3<span class="p">|</span>4<span class="p">|</span>5<span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;你输入的数字为 </span><span class="nv">$aNum</span><span class="s2">!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        *<span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;你输入的数字不是 1 到 5 之间的!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;游戏结束&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div>

<h3 class="relative group">Shell 函数 
    <div id="shell-%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E5%87%BD%E6%95%B0" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li>linux shell 可以用户定义函数，然后在shell脚本中可以随便调用。</li>
<li>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</li>
<li>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">## 第一个函数------------------------------</span>
</span></span><span class="line"><span class="cl">demoFun<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;这是我的第一个 shell 函数!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-----函数开始执行-----&#34;</span>
</span></span><span class="line"><span class="cl">demoFun
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-----函数执行完毕-----&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 函数返回值------------------------------</span>
</span></span><span class="line"><span class="cl">funWithReturn<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;这个函数会对输入的两个数字进行相加运算...&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;输入第一个数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;输入第二个数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> anotherNum
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;两个数字分别为 </span><span class="nv">$aNum</span><span class="s2"> 和 </span><span class="nv">$anotherNum</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">$((</span><span class="nv">$aNum</span><span class="o">+</span><span class="nv">$anotherNum</span><span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">funWithReturn
</span></span><span class="line"><span class="cl"><span class="c1"># 函数返回值在调用该函数后通过 $? 来获得。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;输入的两个数字之和为 </span><span class="nv">$?</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 函数参数------------------------------</span>
</span></span><span class="line"><span class="cl">funWithParam<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第一个参数为 </span><span class="nv">$1</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第二个参数为 </span><span class="nv">$2</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十个参数为 </span><span class="nv">$10</span><span class="s2"> !&#34;</span> <span class="c1"># 如果参数个数太多，达到或者超过了 10 个，那么就得用 ${n} 的形式来接收了</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十个参数为 </span><span class="si">${</span><span class="nv">10</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十一个参数为 </span><span class="si">${</span><span class="nv">11</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;参数总数有 </span><span class="nv">$#</span><span class="s2"> 个!&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;作为一个字符串输出所有参数 </span><span class="nv">$*</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">funWithParam <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span>
</span></span></code></pre></div>

<h2 class="relative group">Shell 实战 
    <div id="shell-%E5%AE%9E%E6%88%98" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell-%E5%AE%9E%E6%88%98" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">添加开机启动项 
    <div id="%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E9%A1%B9" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E9%A1%B9" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　需求：服务器开机后自动与 cn.ntp.org.cn 同步时间。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">touch /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;#!/bin/bash&#39;</span> &gt;&gt; /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;yum info ntp &amp;&amp; yum -y install ntp &amp;&amp; ntpdate cn.ntp.org.cn&#39;</span> &gt;&gt; /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl">chmod +x /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;/usr/local/scripts/auto_ntpdate.sh&#39;</span> &gt;&gt; /etc/rc.d/rc.local
</span></span><span class="line"><span class="cl">chmod +x /etc/rc.d/rc.local
</span></span></code></pre></div>

<h3 class="relative group">虚拟机初始化脚本 
    <div id="%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　目标服务器环境如下：</p>
<table>
<thead>
<tr>
<th>主机名</th>
<th>IP</th>
</tr>
</thead>
<tbody>
<tr>
<td>node01</td>
<td>192.168.88.101</td>
</tr>
<tr>
<td>node02</td>
<td>192.168.88.102</td>
</tr>
<tr>
<td>node03</td>
<td>192.168.88.103</td>
</tr>
</tbody>
</table>
<p>　　首先，使用最初始的<code>example</code>虚拟机克隆出一台完整虚拟机。然后，启动虚拟机并修改网络配置与主机名：</p>
<ul>
<li>修改网络配置中的<code>IPADDR</code>并重启网络；</li>
<li><code>echo node01 &gt; /etc/hostname</code>修改主机名。</li>
</ul>
<p>　　接下来，<code>sh init.sh</code>运行脚本。</p>
<p>　　最后，拍摄快照方便后期回退。</p>
<p>　　然后通过已经初始化完成的 node01 完整克隆出 node02 和 node03，修改它两的网络配置与主机名即可。</p>
<p>　　虚拟机初始化脚本<code>init.sh</code>完整内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">## -bash: ./init.sh: /bin/bash^M: bad interpreter: No such file or directory</span>
</span></span><span class="line"><span class="cl"><span class="c1">## vim 或者 vi 的命令模式下，输入命令 set fileformat=unix 即可解决上述问题</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【在 /opt 目录和 /var 目录下创建 yjx 目录，在 /usr/local 目录下创建 scripts 目录】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">mkdir -p /opt/yjx /var/yjx /usr/local/scripts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【关闭并禁用 firewalld 防火墙】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">systemctl stop firewalld
</span></span><span class="line"><span class="cl">systemctl disable firewalld
</span></span><span class="line"><span class="cl">systemctl status firewalld
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【关闭 SELinux】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;/^SELINUX=/c SELINUX=disabled&#39;</span> /etc/selinux/config
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【安装 wget】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">yum -y install wget
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【修改 yum 源为阿里源】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
</span></span><span class="line"><span class="cl">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
</span></span><span class="line"><span class="cl">yum clean all
</span></span><span class="line"><span class="cl">yum makecache
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【安装常用依赖】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">yum -y install man man-pages telnet perl net-tools openssl-devel ntp lrzsz zip unzip tree vim rsync
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【修改时区为 Asia/Shanghai】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【与中国 NTP 时间服务器 cn.ntp.org.cn 进行时间同步】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">yum info ntp <span class="o">&amp;&amp;</span> yum -y install ntp <span class="o">&amp;&amp;</span> ntpdate cn.ntp.org.cn
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【修改 hosts 文件，添加集群环境机器 IP 与域名映射】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;192.168.88.100 basenode&#34;</span> &gt;&gt; /etc/hosts
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;192.168.88.101 node01&#34;</span> &gt;&gt; /etc/hosts
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;192.168.88.102 node02&#34;</span> &gt;&gt; /etc/hosts
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;192.168.88.103 node03&#34;</span> &gt;&gt; /etc/hosts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【安装 JDK 并设置环境变量】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">rpm -ivh jdk-8u351-linux-x64.rpm
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;export JAVA_HOME=/usr/java/jdk1.8.0_351-amd64&#39;</span> &gt;&gt; /etc/profile
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;export PATH=$JAVA_HOME/bin:$PATH&#39;</span> &gt;&gt; /etc/profile
</span></span><span class="line"><span class="cl"><span class="nb">source</span> /etc/profile
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【安装 Tomcat】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">tar -zxf apache-tomcat-9.0.72.tar.gz -C /opt/yjx/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【安装 MySQL】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">rpm -e --nodeps <span class="sb">`</span>rpm -qa <span class="p">|</span> grep mariadb<span class="sb">`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">tar -xvf mysql-8.0.18-1.el7.x86_64.rpm-bundle.tar
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-common-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-libs-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-client-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-server-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-devel-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">rpm -ivh mysql-community-libs-compat-8.0.18-1.el7.x86_64.rpm
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">systemctl start mysqld
</span></span><span class="line"><span class="cl">systemctl <span class="nb">enable</span> mysqld
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">temppasswd</span><span class="o">=</span><span class="sb">`</span>grep <span class="s2">&#34;A temporary password&#34;</span> /var/log/mysqld.log <span class="p">|</span> awk <span class="s1">&#39;{print $NF}&#39;</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mysql -uroot -p<span class="nv">$temppasswd</span> --connect-expired-password <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">SET GLOBAL validate_password.policy = low;
</span></span></span><span class="line"><span class="cl"><span class="s">SET GLOBAL validate_password.length = 6;
</span></span></span><span class="line"><span class="cl"><span class="s">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s">USE mysql;
</span></span></span><span class="line"><span class="cl"><span class="s">UPDATE user SET host = &#39;%&#39; WHERE user = &#39;root&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s">COMMIT;
</span></span></span><span class="line"><span class="cl"><span class="s">FLUSH PRIVILEGES;
</span></span></span><span class="line"><span class="cl"><span class="s">EXIT
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">systemctl restart mysqld
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【添加时间同步服务至开机启动】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">touch /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;#!/bin/bash&#39;</span> &gt;&gt; /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;yum info ntp &amp;&amp; yum -y install ntp &amp;&amp; ntpdate cn.ntp.org.cn&#39;</span> &gt;&gt; /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl">chmod +x /usr/local/scripts/auto_ntpdate.sh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;/usr/local/scripts/auto_ntpdate.sh&#39;</span> &gt;&gt; /etc/rc.d/rc.local
</span></span><span class="line"><span class="cl">chmod +x /etc/rc.d/rc.local
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;44m【删除 JDK Tomcat MySQL 安装包和虚拟机初始化脚本】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">rm jdk* -rf
</span></span><span class="line"><span class="cl">rm apache-tomcat* -rf
</span></span><span class="line"><span class="cl">rm mysql* -rf
</span></span><span class="line"><span class="cl">rm init.sh -rf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\e[1;41m【即将关闭计算机】\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">sleep <span class="m">2</span>
</span></span><span class="line"><span class="cl">shutdown -h now
</span></span></code></pre></div>

<h3 class="relative group">服务器相互免秘钥 
    <div id="%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E4%BA%92%E5%85%8D%E7%A7%98%E9%92%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E4%BA%92%E5%85%8D%E7%A7%98%E9%92%A5" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">生成密钥 
    <div id="%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　分别在三台机器上运行以下命令生成密钥对：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh-keygen -t rsa -P <span class="s1">&#39;&#39;</span> -f ~/.ssh/id_rsa
</span></span></code></pre></div><p>　　运行以上命令后会在<code>~/.ssh/</code>目录下生成一对密钥对。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># ls ~/.ssh/</span>
</span></span><span class="line"><span class="cl">id_rsa  id_rsa.pub  known_hosts
</span></span></code></pre></div>

<h4 class="relative group">取消主机名与 host 校验 
    <div id="%E5%8F%96%E6%B6%88%E4%B8%BB%E6%9C%BA%E5%90%8D%E4%B8%8E-host-%E6%A0%A1%E9%AA%8C" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%8F%96%E6%B6%88%E4%B8%BB%E6%9C%BA%E5%90%8D%E4%B8%8E-host-%E6%A0%A1%E9%AA%8C" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　分别在三台机器上修改<code>/etc/ssh/ssh_config</code>文件的配置，在<code>Host *</code>节点下配置以下信息：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="c1"># 严格的密钥检查 no</span>
</span></span><span class="line"><span class="cl"><span class="na">StrictHostKeyChecking</span> <span class="s">no</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果不希望生成已知主机列表文件，可以将已知主机列表文件信息写入黑洞（不会再生成 known_hosts 文件）</span>
</span></span><span class="line"><span class="cl"><span class="c1">#UserKnownHostsFile /dev/null</span>
</span></span></code></pre></div><p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/shell/index.assets/image-20230117194918578_hu19ae6b2af4e28e4b61e992f03355dc10_50121_330x0_resize_box_3.png 330w,
        /posts/shell/index.assets/image-20230117194918578_hu19ae6b2af4e28e4b61e992f03355dc10_50121_660x0_resize_box_3.png 660w,
        /posts/shell/index.assets/image-20230117194918578_hu19ae6b2af4e28e4b61e992f03355dc10_50121_1024x0_resize_box_3.png 1024w,
        /posts/shell/index.assets/image-20230117194918578_hu19ae6b2af4e28e4b61e992f03355dc10_50121_1320x0_resize_box_3.png 2x"
        src="/posts/shell/index.assets/image-20230117194918578_hu19ae6b2af4e28e4b61e992f03355dc10_50121_660x0_resize_box_3.png"
        alt=""
      />
      
    </figure>
</p>
<p>　　这样以后再也不会弹出将该主机添加到当前设备的已知主机列表中的提示信息了。</p>
<p>　　如果将已知主机列表文件信息写入了黑洞，那么远程访问时会弹出以下警告：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Warning: Permanently added <span class="s1">&#39;node02,192.168.88.102&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</span></span></code></pre></div><p>　　这个警告不影响任何操作，只是看着比较碍眼。解决办法：在文件夹<code>~/.ssh/</code>下创建<code>config</code>文件，命令如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim ~/.ssh/config
</span></span></code></pre></div><p>　　在新建的文件中写入如下内容：<code>LogLevel=quiet</code>。</p>


<h4 class="relative group">拷贝公钥 
    <div id="%E6%8B%B7%E8%B4%9D%E5%85%AC%E9%92%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%8B%B7%E8%B4%9D%E5%85%AC%E9%92%A5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>　　接下来把自己的公钥互相传递给其他主机，这个公钥文件必须放在对方主机的<code>~/.ssh/authorized_keys</code>文件中。可以使用命令将公钥文件自动传递过去，分别在三台机器运行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh-copy-id -i ~/.ssh/id_rsa.pub root@node01
</span></span><span class="line"><span class="cl">ssh-copy-id -i ~/.ssh/id_rsa.pub root@node02
</span></span><span class="line"><span class="cl">ssh-copy-id -i ~/.ssh/id_rsa.pub root@node03
</span></span></code></pre></div><blockquote>
<p>前面已经通过脚本修改了 hosts 文件，添加了集群环境机器 IP 与域名映射，所以这里可以直接使用主机名。</p>
</blockquote>
<p>　　传输文件测试是否已免密或者使用 ssh 协议登录对方主机进行测试：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># scp anaconda-ks.cfg root@node02:~</span>
</span></span><span class="line"><span class="cl">Warning: Permanently added <span class="s1">&#39;node02,192.168.88.102&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</span></span><span class="line"><span class="cl">anaconda-ks.cfg
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ssh root@node02</span>
</span></span><span class="line"><span class="cl">Warning: Permanently added <span class="s1">&#39;node02,192.168.88.102&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</span></span><span class="line"><span class="cl">Last login: Sat Jun  <span class="m">4</span> 21:07:25 <span class="m">2022</span> from node01
</span></span></code></pre></div><p>　　测试没问题后，<code>shutdown -h now</code>关机，拍摄快照方便后期回退。</p>


<h3 class="relative group">集群启动脚本 
    <div id="%E9%9B%86%E7%BE%A4%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E9%9B%86%E7%BE%A4%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　在<code>/usr/local/bin</code>目录下创建对应服务的脚本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /usr/local/bin/tomcat</span>
</span></span></code></pre></div><p>　　<code>tomcat</code>脚本内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$1</span> in
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;start&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> i in node01 node02 node03
</span></span><span class="line"><span class="cl">        <span class="k">do</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$i</span><span class="s2"> Tomcat 启动 ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">            ssh <span class="nv">$user</span>@<span class="nv">$i</span> <span class="s2">&#34;/opt/yjx/apache-tomcat-9.0.72/bin/startup.sh&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;shutdown&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> i in node01 node02 node03
</span></span><span class="line"><span class="cl">        <span class="k">do</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$i</span><span class="s2"> Tomcat 停止 ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">            ssh <span class="nv">$user</span>@<span class="nv">$i</span> <span class="s2">&#34;/opt/yjx/apache-tomcat-9.0.72/bin/shutdown.sh&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span></code></pre></div><p>　　修改脚本权限为用户读写执行<code>rwx</code>，组读执行<code>r-x</code>，其他用户无权限<code>r--</code>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># chmod 754 /usr/local/bin/tomcat</span>
</span></span></code></pre></div>

<h3 class="relative group">JPS 脚本 
    <div id="jps-%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#jps-%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　jps 是 JDK 提供的一个查看当前系统 Java 进程的小工具，全称是 Java Virtual Machine Process Status Tool。</p>
<p>　　常用选项如下：</p>
<ul>
<li><code>-q</code>：忽略输出的类名，Jar 名以及传递给 main 方法的参数，只输出 PID</li>
<li><code>-m</code>：输出传递给 main 方法的参数，如果是内嵌的 JVM 则输出为 null</li>
<li><code>-l</code>：输出应用程序主类的完整包名，或者是应用程序 JAR 文件的完整路径</li>
<li><code>-v</code>：输出 JVM 的参数</li>
<li><code>-V</code>：输出通过标记文件传递给 JVM 的参数(.hotspotrc 文件，或者通过参数<code>-XX:Flags=&lt;filename&gt;</code>指定的文件)</li>
<li><code>-J</code>：传递 JVM 参数到由 javac 调用的 java 加载器中，例如：-J-Xms512m，把启动内存设置为 512M。使用 -J 选项可以非常方便的向基于 Java 开发的底层虚拟机应用程序传递参数</li>
</ul>
<p>　　顺便再创建一个查看所有服务器 JPS 进程的脚本。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /usr/local/bin/jpsall</span>
</span></span></code></pre></div><p>　　<code>jpsall</code>脚本内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 获取当前用户名称</span>
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># $#：传递给脚本或函数的参数个数</span>
</span></span><span class="line"><span class="cl"><span class="nv">params_count</span><span class="o">=</span><span class="nv">$#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果没有参数，直接运行 &#34;jps&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$params_count</span> -lt <span class="m">1</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> i in node01 node02 node03
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$i</span><span class="s2"> ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">        ssh <span class="nv">$user</span>@<span class="nv">$i</span> jps
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果有参数，运行 &#34;jps -参数&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in node01 node02 node03
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$i</span><span class="s2"> ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">params</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> p in <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="nv">params</span><span class="o">+=</span><span class="s2">&#34;</span><span class="nv">$p</span><span class="s2"> &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    ssh <span class="nv">$user</span>@<span class="nv">$i</span> <span class="s2">&#34;jps </span><span class="nv">$params</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>　　修改脚本权限为用户读写执行<code>rwx</code>，组读执行<code>r-x</code>，其他用户读执行<code>r-x</code>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># chmod 755 /usr/local/bin/jpsall</span>
</span></span></code></pre></div>

<h3 class="relative group">文件分发脚本 
    <div id="%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%E8%84%9A%E6%9C%AC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%E8%84%9A%E6%9C%AC" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>　　在<code>/usr/local/bin</code>目录下创建<code>yjxrsync</code>脚本，如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># vim /usr/local/bin/yjxrsync</span>
</span></span></code></pre></div><p>　　<code>yjxrsync</code>脚本内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 获取输入参数的个数</span>
</span></span><span class="line"><span class="cl"><span class="nv">param_count</span><span class="o">=</span><span class="nv">$#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果没有参数，直接退出</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$param_count</span> -lt <span class="m">1</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;31myjxrsync: You must pass in the file name parameter.\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取当前用户名称</span>
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果有参数，遍历参数（文件或目录名称）</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> p in <span class="nv">$@</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$p</span><span class="s2"> 开始同步 ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># basename：显示文件路径名的基本文件名，例如 /opt/bd 会显示 bd；/opt/bd/test.txt 会显示 test.txt</span>
</span></span><span class="line"><span class="cl">    <span class="nv">file_name</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$p</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">file_name</span><span class="o">=</span><span class="nv">$file_name</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># 获取文件的上级目录的绝对路径</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># -P：如果切换的目标目录是一个符号链接，则直接切换到符号链接指向的目标目录</span>
</span></span><span class="line"><span class="cl">    <span class="nv">parent_dir</span><span class="o">=</span><span class="sb">`</span><span class="nb">cd</span> -P <span class="k">$(</span>dirname <span class="nv">$p</span><span class="k">)</span><span class="p">;</span> <span class="nb">pwd</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">parent_dir</span><span class="o">=</span><span class="nv">$parent_dir</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 循环处理文件</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> i in node01 node02 node03
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> -e <span class="s2">&#34;\e[1;34m==================== </span><span class="nv">$i</span><span class="s2"> ====================\e[0m&#34;</span>
</span></span><span class="line"><span class="cl">        rsync -av --delete <span class="nv">$parent_dir</span>/<span class="nv">$file_name</span> <span class="nv">$user</span>@<span class="nv">$i</span>:<span class="nv">$parent_dir</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>　　修改脚本权限为用户读写执行<code>rwx</code>，组读执行<code>r-x</code>，其他用户无权限<code>---</code>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@node01 ~<span class="o">]</span><span class="c1"># chmod 750 /usr/local/bin/yjxrsync</span>
</span></span></code></pre></div>
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_posts\\shell\\index.md"
        var oid_likes = "likes_posts\\shell\\index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="返回顶部" title="返回顶部">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      哈喽沃德先生
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a> 强力驱动
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
